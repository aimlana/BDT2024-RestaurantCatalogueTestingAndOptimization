import{openDB}from"idb";import CONFIG from"../../scripts/global/config";const{DATABASE_NAME,DATABASE_VERSION,OBJECT_STORE_NAME}=CONFIG,dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade(e){e.createObjectStore(OBJECT_STORE_NAME,{keyPath:"id"})}}),FavoriteRestaurantIdb={async getResto(e){if(e)return(await dbPromise).get(OBJECT_STORE_NAME,e)},getAllRestos:async()=>(await dbPromise).getAll(OBJECT_STORE_NAME),async putResto(e){if(e.hasOwnProperty("id"))return(await dbPromise).put(OBJECT_STORE_NAME,e)},deleteResto:async e=>(await dbPromise).delete(OBJECT_STORE_NAME,e),async searchRestos(e){return(await this.getAllRestos()).filter((t=>{const r=(t.title||"-").toLowerCase().replace(/\s/g,""),E=e.toLowerCase().replace(/\s/g,"");return-1!==r.indexOf(E)}))}};export default FavoriteRestaurantIdb;